---
title: "2.11BSD source code browser and xref"
tags:  ["ouxr", "211bsd"]
#
my:
  changedate: 2016-11-27
---
{% assign url_211bsd = site.my.ouxr.url_211bsd %}

<p>
When searching lately a lot through the UNIX 2.11BSD source code I
wanted many times a hyperlinked and cross-referenced rendition of the
sources, much like <a href="http://www.doxygen.org/">doxygen</a> or
<a href="http://lxr.free-electrons.com/">lxr</a> does it.
For kernel, library, and userland code, for C and assembler.
</p>
<p>
Since none of the existing tools seemed to do what I wanted, I wrote
a Perl script generating such a html'ized version of the source code.
</p>
<p>
The tool is far from finished, but might already be useful. For a tour
start for example with the code of the <code>cp</code> command
</p>
<pre>
  <a href="{{url_211bsd}}/usr/src/bin/cp.c.html">{{url_211bsd}}/usr/src/bin/cp.c.html</a>
</pre>
and click along. The links connect C and asm code, the userland code,
libc, and kernel code. Look to the <code>readdir()</code> call in line 197,
a click gets you into the libc module implementing <code>readdir()</code>.
A further click on <code>read()</code> into the assembler stub doing the
system call, and a click on the kernel handler listed there gets you into
the kernel source. Here are the links to the tour
<pre>
  <a href="{{url_211bsd}}/usr/src/bin/cp.c.html#n:197">{{url_211bsd}}/usr/src/bin/cp.c.html#n:197</a>
  <a href="{{url_211bsd}}/usr/src/lib/libc/gen/readdir.c.html#s:_readdir">{{url_211bsd}}/usr/src/lib/libc/gen/readdir.c.html#s:_readdir</a>
  <a href="{{url_211bsd}}/usr/src/lib/libc/pdp/sys/__read.s.html#s:_read">{{url_211bsd}}/usr/src/lib/libc/pdp/sys/__read.s.html#s:_read</a>
  <a href="{{url_211bsd}}/usr/src/sys/sys/sys_generic.c.html#s:_read">{{url_211bsd}}/usr/src/sys/sys/sys_generic.c.html#s:_read</a>
</pre>
<p>
The background color tells you in which territory you are in
</p>
<pre>
  <span class="ouxr-cboot">magenta</span>   boot and standalone code
  <span class="ouxr-ckern">red    </span>   kernel
  <span class="ouxr-cnet">gold   </span>   network code (running in supervisor)
  <span class="ouxr-clib">green  </span>   libraries
  <span class="ouxr-cuser">blue   </span>   userland code
</pre>
<p>
If you want a kernel tour, start at
</p>
<pre>
  <a href="{{url_211bsd}}/usr/src/sys/sys/init_main.c.html">{{url_211bsd}}/usr/src/sys/sys/init_main.c.html</a>
</pre>
<p>
Clicking on a symbol definition (or the X in the sidebar) gets you to the cross
referencing info's. To see for example who is using <code>setjmp</code> see
</p>
<pre>
  <a href="{{url_211bsd}}/usr/src/lib/libc/pdp/gen/setjmp.s.html#xref:s:_setjmp">{{url_211bsd}}/usr/src/lib/libc/pdp/gen/setjmp.s.html#xref:s:_setjmp</a>
</pre>
or who is including <code>nlist.h</code> see
<pre>
  <a href="{{url_211bsd}}/usr/include/nlist.h.html#xref:i:nlist.h">{{url_211bsd}}/usr/include/nlist.h.html#xref:i:nlist.h</a>
</pre>
<p>
As said, it's beta stage, the style sheet is still the debug version,
not all links end where they should, not all is parsed as it should.
</p>
<p>
Hope you enjoy it.
</p>

<div class="notebox">
  <b>2016-11-27:</b> The ouxr data have been moved from the server cited in
  the original posting to a different site. Updated the post accordingly.
</div>

<div class="notebox">
  For original note to 2.11BSD users see
  {% include wbm-link.html 
  date="20141006194042"
  link="http://www.classiccmp.org/pipermail/cctech/2007-March/037360.html"
  text="posting to cctech@classiccmp.org" %}
  . That started a nice thread back in 2007.
</div>
